<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OCP + Polimorfismo</title>
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500&family=Fraunces:ital,wght@0,300;0,700;1,300&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0d0f14;
        --surface: #161920;
        --border: #252932;
        --ocp: #e8c547;
        --ocp-dim: rgba(232, 197, 71, 0.12);
        --open: #5bc98a;
        --open-dim: rgba(91, 201, 138, 0.1);
        --closed: #e05c5c;
        --closed-dim: rgba(224, 92, 92, 0.1);
        --poly: #7eb8f7;
        --poly-dim: rgba(126, 184, 247, 0.1);
        --tension: #f09a4b;
        --tension-dim: rgba(240, 154, 75, 0.1);
        --muted: #4a5060;
        --text: #cdd3df;
        --text-dim: #6b7280;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: var(--bg);
        color: var(--text);
        font-family: "DM Mono", monospace;
        min-height: 100vh;
        padding: 40px 32px;
        overflow-x: hidden;
      }

      /* HEADER */
      .header {
        text-align: center;
        margin-bottom: 56px;
        animation: fadeDown 0.6s ease both;
      }
      .header .eyebrow {
        font-size: 11px;
        letter-spacing: 0.25em;
        color: var(--text-dim);
        text-transform: uppercase;
        margin-bottom: 12px;
      }
      .header h1 {
        font-family: "Fraunces", serif;
        font-size: clamp(28px, 5vw, 48px);
        font-weight: 700;
        color: var(--ocp);
        line-height: 1.1;
      }
      .header h1 span {
        font-style: italic;
        font-weight: 300;
        color: var(--text);
      }
      .header .subtitle {
        margin-top: 10px;
        font-size: 13px;
        color: var(--text-dim);
      }

      /* CORE RULE BANNER */
      .core-rule {
        border: 1px solid var(--ocp);
        background: var(--ocp-dim);
        border-radius: 8px;
        padding: 20px 28px;
        display: flex;
        align-items: center;
        gap: 20px;
        max-width: 860px;
        margin: 0 auto 48px;
        animation: fadeDown 0.6s 0.1s ease both;
      }
      .core-rule .icon {
        font-size: 28px;
        flex-shrink: 0;
      }
      .core-rule .text {
        font-size: 13px;
        line-height: 1.8;
      }
      .core-rule .text strong {
        color: var(--ocp);
        font-size: 14px;
      }

      /* GRID PRINCIPAL */
      .main-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        max-width: 860px;
        margin: 0 auto 48px;
        animation: fadeUp 0.6s 0.2s ease both;
      }

      .card {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 22px;
      }
      .card-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 14px;
      }
      .card-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        flex-shrink: 0;
      }
      .card-label {
        font-size: 11px;
        letter-spacing: 0.15em;
        text-transform: uppercase;
        color: var(--text-dim);
      }
      .card-title {
        font-family: "Fraunces", serif;
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 10px;
      }
      .card-body {
        font-size: 12px;
        line-height: 1.8;
        color: var(--text-dim);
      }
      .card-body strong {
        color: var(--text);
      }

      .card-open .card-dot {
        background: var(--open);
      }
      .card-open .card-title {
        color: var(--open);
      }
      .card-open {
        border-color: rgba(91, 201, 138, 0.2);
      }

      .card-closed .card-dot {
        background: var(--closed);
      }
      .card-closed .card-title {
        color: var(--closed);
      }
      .card-closed {
        border-color: rgba(224, 92, 92, 0.2);
      }

      /* FLUJO POLIMORFISMO */
      .flow-section {
        max-width: 860px;
        margin: 0 auto 48px;
        animation: fadeUp 0.6s 0.3s ease both;
      }
      .section-title {
        font-size: 11px;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: var(--text-dim);
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .section-title::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--border);
      }

      .flow {
        display: grid;
        grid-template-columns: 1fr auto 1fr auto 1fr;
        align-items: center;
        gap: 0;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
      }
      .flow-node {
        padding: 20px 18px;
        text-align: center;
      }
      .flow-node .node-icon {
        font-size: 22px;
        margin-bottom: 8px;
      }
      .flow-node .node-name {
        font-size: 12px;
        font-weight: 500;
        margin-bottom: 4px;
      }
      .flow-node .node-desc {
        font-size: 11px;
        color: var(--text-dim);
        line-height: 1.5;
      }

      .flow-node.factory-node {
        background: rgba(126, 184, 247, 0.05);
        border-right: 1px solid var(--border);
        border-left: 1px solid var(--border);
      }
      .flow-node.factory-node .node-name {
        color: var(--poly);
      }

      .flow-arrow {
        padding: 0 8px;
        color: var(--muted);
        font-size: 18px;
        text-align: center;
      }

      .flow-classes {
        display: flex;
        flex-direction: column;
        gap: 1px;
      }
      .flow-class {
        padding: 10px 14px;
        font-size: 11px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .flow-class:first-child {
        border-radius: 0;
      }
      .flow-class .fc-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--poly);
        flex-shrink: 0;
      }
      .flow-class .fc-name {
        color: var(--poly);
        font-weight: 500;
      }
      .flow-class .fc-desc {
        color: var(--text-dim);
        font-size: 10px;
      }

      /* LA SE√ëAL DE ALARMA */
      .alarm-section {
        max-width: 860px;
        margin: 0 auto 48px;
        animation: fadeUp 0.6s 0.35s ease both;
      }

      .alarm-grid {
        display: grid;
        grid-template-columns: 1fr 40px 1fr;
        align-items: start;
        gap: 0;
      }
      .alarm-bad,
      .alarm-good {
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
      }
      .alarm-bad {
        border-color: rgba(224, 92, 92, 0.25);
      }
      .alarm-good {
        border-color: rgba(91, 201, 138, 0.25);
      }

      .alarm-header {
        padding: 12px 18px;
        font-size: 11px;
        letter-spacing: 0.1em;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .alarm-bad .alarm-header {
        background: rgba(224, 92, 92, 0.08);
        color: var(--closed);
      }
      .alarm-good .alarm-header {
        background: rgba(91, 201, 138, 0.08);
        color: var(--open);
      }

      .alarm-body {
        padding: 16px 18px;
        font-size: 11.5px;
        line-height: 1.9;
        color: #8d99ab;
      }
      .alarm-body .kw {
        color: #c792ea;
      }
      .alarm-body .str {
        color: var(--open);
      }
      .alarm-body .comment {
        color: var(--muted);
        font-style: italic;
      }
      .alarm-body .warn {
        color: var(--closed);
      }
      .alarm-body .ok {
        color: var(--open);
      }

      .vs-divider {
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: "Fraunces", serif;
        font-style: italic;
        color: var(--text-dim);
        font-size: 14px;
        padding-top: 40px;
      }

      /* TENSIONES */
      .tensions-section {
        max-width: 860px;
        margin: 0 auto 48px;
        animation: fadeUp 0.6s 0.4s ease both;
      }
      .tensions-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
      }
      .tension-card {
        border-radius: 10px;
        border: 1px solid var(--border);
        overflow: hidden;
      }
      .tension-header {
        padding: 14px 16px;
        font-size: 12px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .tension-badge {
        font-size: 10px;
        padding: 2px 8px;
        border-radius: 20px;
        margin-left: auto;
      }
      .tension-body {
        padding: 14px 16px;
        font-size: 11.5px;
        line-height: 1.75;
        color: var(--text-dim);
        background: var(--surface);
      }
      .tension-body strong {
        color: var(--text);
      }

      .t-yagni .tension-header {
        background: rgba(240, 154, 75, 0.1);
        color: var(--tension);
      }
      .t-yagni .tension-badge {
        background: rgba(240, 154, 75, 0.15);
        color: var(--tension);
      }

      .t-srp .tension-header {
        background: rgba(126, 184, 247, 0.08);
        color: var(--poly);
      }
      .t-srp .tension-badge {
        background: rgba(126, 184, 247, 0.12);
        color: var(--poly);
      }

      .t-kiss .tension-header {
        background: rgba(232, 197, 71, 0.08);
        color: var(--ocp);
      }
      .t-kiss .tension-badge {
        background: rgba(232, 197, 71, 0.12);
        color: var(--ocp);
      }

      /* BALANCE */
      .balance-section {
        max-width: 860px;
        margin: 0 auto 0;
        animation: fadeUp 0.6s 0.45s ease both;
      }
      .balance-bar {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 2px;
        margin-bottom: 12px;
      }
      .balance-side {
        padding: 14px 18px;
        border-radius: 8px;
        font-size: 12px;
      }
      .balance-left {
        background: rgba(224, 92, 92, 0.08);
        border: 1px solid rgba(224, 92, 92, 0.2);
        color: var(--closed);
      }
      .balance-right {
        background: rgba(91, 201, 138, 0.08);
        border: 1px solid rgba(91, 201, 138, 0.2);
        color: var(--open);
        text-align: right;
      }
      .balance-center {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        color: var(--ocp);
        padding: 0 8px;
      }
      .balance-question {
        text-align: center;
        font-family: "Fraunces", serif;
        font-size: 15px;
        color: var(--ocp);
        margin-top: 16px;
        font-style: italic;
      }
      .balance-answers {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 12px;
        flex-wrap: wrap;
      }
      .balance-answer {
        font-size: 11.5px;
        color: var(--text-dim);
        padding: 6px 14px;
        border: 1px solid var(--border);
        border-radius: 20px;
        background: var(--surface);
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .balance-answer .dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
      }

      @keyframes fadeDown {
        from {
          opacity: 0;
          transform: translateY(-16px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(16px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  
<style>
/* ‚îÄ‚îÄ NAV OVERLAY ‚Äî no toca estilos originales ‚îÄ‚îÄ */
.site-nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 54px;
  background: rgba(14,17,23,0.95);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom: 1px solid #252d3d;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 28px;
  z-index: 9999;
  box-sizing: border-box;
}
.nav-brand {
  font-family: 'Fraunces', serif;
  font-size: 13px;
  font-style: italic;
  font-weight: 300;
  color: #8d99ab;
  white-space: nowrap;
  text-decoration: none;
}
.nav-brand strong {
  font-style: normal;
  font-weight: 700;
  color: #e8c547;
}
.nav-links {
  display: flex;
  align-items: center;
  gap: 4px;
}
.nav-link {
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  text-decoration: none;
  padding: 6px 12px;
  border-radius: 6px;
  border: 1px solid transparent;
  color: #5a6378;
  transition: all 0.2s ease;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
}
.nav-link:hover {
  color: #cdd3df;
  background: #161b24;
  border-color: #252d3d;
}
.nav-step {
  font-size: 9px;
  padding: 1px 6px;
  border-radius: 20px;
  background: #161b24;
  border: 1px solid #252d3d;
  color: #5a6378;
  transition: all 0.2s ease;
}
/* activos */
.nav-link.active-fragil { color: #e05c5c; background: rgba(224,92,92,0.1); border-color: rgba(224,92,92,0.25); }
.nav-link.active-srp    { color: #5bc98a; background: rgba(91,201,138,0.1); border-color: rgba(91,201,138,0.25); }
.nav-link.active-ocp    { color: #e8c547; background: rgba(232,197,71,0.1); border-color: rgba(232,197,71,0.25); }
.nav-link.active-fragil .nav-step { background: rgba(224,92,92,0.15); border-color: rgba(224,92,92,0.3); color: #e05c5c; }
.nav-link.active-srp    .nav-step { background: rgba(91,201,138,0.12); border-color: rgba(91,201,138,0.3); color: #5bc98a; }
.nav-link.active-ocp    .nav-step { background: rgba(232,197,71,0.12); border-color: rgba(232,197,71,0.3); color: #e8c547; }
/* compensar nav fijo */
body { padding-top: 82px !important; }
</style>


<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MOBILE RESPONSIVE ‚Äî inyectado
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

/* ‚îÄ‚îÄ NAV mobile ‚îÄ‚îÄ */
@media (max-width: 640px) {
  .site-nav {
    padding: 0 14px;
    height: auto;
    min-height: 54px;
    flex-wrap: wrap;
    gap: 6px;
    padding-top: 8px;
    padding-bottom: 8px;
  }
  .nav-brand { font-size: 12px; }
  .nav-links { gap: 3px; }
  .nav-link  { font-size: 10px; padding: 4px 8px; gap: 4px; }
  .nav-step  { display: none; }
  body { padding-top: 90px !important; }
}

/* ‚îÄ‚îÄ index.html / ejemplo-fragil ‚îÄ‚îÄ */
@media (max-width: 640px) {
  body { padding-left: 14px !important; padding-right: 14px !important; }

  /* header */
  .header { margin-bottom: 24px; }
  h1 { font-size: 22px !important; }

  /* scenario */
  .scenario { font-size: 12px; padding: 12px 14px; margin-bottom: 20px; }

  /* requerimiento ‚Äî apila verticalmente */
  .new-req { flex-direction: column; align-items: center; gap: 8px; margin-bottom: 20px; }
  .new-req-arrow { transform: rotate(90deg); font-size: 18px; }
  .new-req-box { font-size: 12px; padding: 10px 16px; text-align: center; }

  /* grids de clases ‚Üí 1 columna */
  .classes-grid,
  .grid-3,
  .grid-3-orch { grid-template-columns: 1fr !important; }

  /* botones ‚Äî ancho completo */
  .btn-wrap { padding: 0 4px; }
  .btn { width: 100%; justify-content: center; font-size: 12px; padding: 11px 16px; }

  /* file-row ‚Äî reorganizar en 2 l√≠neas */
  .file-row { flex-wrap: wrap; gap: 6px; }
  .file-why  { flex-basis: 100%; margin-left: 0; text-align: left; padding-left: 27px; }

  /* stats ‚Äî 2 columnas */
  .impact-row { gap: 10px; }
  .impact-stat { min-width: calc(50% - 10px); padding: 12px 10px; }
  .impact-num  { font-size: 26px; }

  /* bottom msg */
  .bottom-msg { padding: 16px 14px; }
  .bottom-msg .question { font-size: 14px; }
}

/* ‚îÄ‚îÄ concepto-ocp-polimorfismo ‚îÄ‚îÄ */
@media (max-width: 640px) {
  /* open/closed grid 2col ‚Üí 1col */
  .main-grid { grid-template-columns: 1fr !important; }

  /* flujo polimorfismo ‚Äî stack vertical */
  .flow { grid-template-columns: 1fr !important; }
  .flow-arrow { display: none; }
  .flow-node { border-right: none !important; border-left: none !important; border-bottom: 1px solid var(--border, #252d3d); }
  .flow-node:last-child { border-bottom: none; }

  /* alarm bad vs good ‚Äî stack vertical */
  .alarm-grid { grid-template-columns: 1fr !important; }
  .vs-divider { padding: 8px 0; }

  /* tensions ‚Äî 1 columna */
  .tensions-grid { grid-template-columns: 1fr !important; }

  /* balance bar ‚Äî stack vertical */
  .balance-bar { grid-template-columns: 1fr !important; gap: 8px; }
  .balance-right { text-align: left !important; }
  .balance-center { justify-content: flex-start; padding: 0; }
  .balance-answers { gap: 10px; }

  /* core rule banner */
  .core-rule { flex-direction: column; gap: 10px; padding: 16px; }

  /* section titles */
  .section-title { font-size: 10px; }
}

/* ‚îÄ‚îÄ ejemplo-fragil-conSRP ‚îÄ‚îÄ */
@media (max-width: 640px) {
  /* context banner */
  .context { flex-direction: column; gap: 8px; padding: 12px 14px; }

  /* status pills ‚Äî wrap */
  .status-row { flex-direction: column; align-items: stretch; gap: 8px; }
  .status-pill { justify-content: center; font-size: 11px; }

  /* explain/diff grid */
  .explain-grid,
  .diff-box { grid-template-columns: 1fr !important; }

  /* closing */
  .closing { padding: 14px; }
  .closing .q { font-size: 14px; }

  /* impact row */
  .impact-stat { min-width: calc(50% - 10px); }
}
</style>

</head>
  <body>
<!-- NAVBAR -->
<nav class="site-nav">
  <span class="nav-brand"><strong>OCP</strong> + Polimorfismo</span>
  <div class="nav-links">
    <a href="index.html" class="nav-link ">
      <span class="nav-step">01</span> Sin OCP
    </a>
    <a href="ejemplo-fragil-conSRP.html" class="nav-link ">
      <span class="nav-step">02</span> SRP sin OCP
    </a>
    <a href="concepto-ocp-polimorfismo.html" class="nav-link active-ocp">
      <span class="nav-step">03</span> OCP + Polimorfismo
    </a>
  </div>
</nav>

    <!-- HEADER -->
    <header class="header">
      <div class="eyebrow">SOLID ¬∑ Principio #2</div>
      <h1>Open/Closed <span>+ Polimorfismo</span></h1>
      <div class="subtitle">Extensi√≥n controlada del comportamiento</div>
    </header>

    <!-- REGLA CORE -->
    <div class="core-rule">
      <div class="icon">üìê</div>
      <div class="text">
        <strong>La regla:</strong> el software debe estar
        <strong style="color: var(--open)">abierto a extensi√≥n</strong> pero
        <strong style="color: var(--closed)">cerrado a modificaci√≥n</strong
        >.<br />
        Agregar nueva funcionalidad no deber√≠a obligarte a tocar c√≥digo que ya
        funciona y est√° probado.
      </div>
    </div>

    <!-- OPEN vs CLOSED -->
    <div class="main-grid">
      <div class="card card-open">
        <div class="card-header">
          <div class="card-dot"></div>
          <div class="card-label">Abierto a</div>
        </div>
        <div class="card-title">Extensi√≥n</div>
        <div class="card-body">
          Puedes <strong>agregar</strong> nuevos comportamientos creando c√≥digo
          nuevo.<br /><br />
          Un nuevo m√©todo de pago ‚Üí un nuevo archivo.<br />
          Un nuevo formato de export ‚Üí una nueva clase.<br /><br />
          El sistema crece <strong>hacia afuera</strong>, no hacia adentro.
        </div>
      </div>
      <div class="card card-closed">
        <div class="card-header">
          <div class="card-dot"></div>
          <div class="card-label">Cerrado a</div>
        </div>
        <div class="card-title">Modificaci√≥n</div>
        <div class="card-body">
          No deber√≠as tener que <strong>tocar</strong> los archivos que ya
          funcionan.<br /><br />
          <strong>Cada modificaci√≥n</strong> a c√≥digo existente es un riesgo:
          puedes romper algo que estaba bien y que ya ten√≠a tests.<br /><br />
          El costo oculto de cambiar lo estable es alto.
        </div>
      </div>
    </div>

    <!-- FLUJO POLIMORFISMO -->
    <div class="flow-section">
      <div class="section-title">
        C√≥mo lo implementa el Polimorfismo (GRASP)
      </div>
      <div class="flow">
        <div class="flow-node">
          <div class="node-icon">üìã</div>
          <div class="node-name" style="color: var(--ocp)">Interfaz</div>
          <div class="node-desc">
            El contrato.<br />Define el <em>qu√©</em>, no el
            <em>c√≥mo</em>.<br />Nunca cambia.
          </div>
        </div>
        <div class="flow-arrow">‚Üí</div>
        <div class="flow-node factory-node">
          <div class="node-icon">üè≠</div>
          <div class="node-name">Factory</div>
          <div class="node-desc">
            El √∫nico switch.<br />Vive en un lugar.<br />Crea el objeto
            correcto.
          </div>
        </div>
        <div class="flow-arrow">‚Üí</div>
        <div class="flow-node" style="padding: 0">
          <div class="flow-classes">
            <div
              class="flow-class"
              style="background: rgba(126, 184, 247, 0.04)"
            >
              <div class="fc-dot"></div>
              <div>
                <div class="fc-name">Tarjeta</div>
                <div class="fc-desc">sabe c√≥mo procesarse</div>
              </div>
            </div>
            <div
              class="flow-class"
              style="background: rgba(126, 184, 247, 0.07)"
            >
              <div class="fc-dot"></div>
              <div>
                <div class="fc-name">Transferencia</div>
                <div class="fc-desc">sabe c√≥mo procesarse</div>
              </div>
            </div>
            <div
              class="flow-class"
              style="background: rgba(126, 184, 247, 0.11)"
            >
              <div class="fc-dot" style="background: var(--open)"></div>
              <div>
                <div class="fc-name" style="color: var(--open)">
                  paypal ‚Üê nuevo
                </div>
                <div class="fc-desc">archivo nuevo, nada m√°s</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SE√ëAL DE ALARMA: BAD vs GOOD CODE -->
    <div class="alarm-section">
      <div class="section-title">Comparativa: El impacto del cambio</div>
      <div class="alarm-grid">
        <div class="alarm-bad">
          <div class="alarm-header">üö® Dise√±o Fr√°gil (Switch Everywhere)</div>
          <div class="alarm-body">
            <span class="comment">// PaymentFactory.ts</span><br />
            <span class="kw">if</span> (tipo ==
            <span class="str">"tarjeta"</span>)
            <span class="kw">return new</span> Tarjeta();<br />
            <span class="warn">else if (tipo == "paypal") ...</span><br /><br />

            <span class="comment">// GeneradorReportes.ts</span><br />
            <span class="kw">if</span> (tipo ==
            <span class="str">"tarjeta"</span>) csv.add(pago.id);<br />
            <span class="warn">else if (tipo == "paypal") api.send(pago);</span
            ><br /><br />

            <span class="comment">// CheckoutView.ts (UI)</span><br />
            <span class="kw">if</span> (tipo ==
            <span class="str">"tarjeta"</span>) render(<span class="str"
              >"üí≥"</span
            >);<br />
            <span class="warn">else if (tipo == "paypal") render("üÖøÔ∏è");</span
            ><br /><br />

            <span class="warn">‚ö† PayPal obliga a modificar 3 archivos.</span>
          </div>
        </div>

        <div class="vs-divider">vs</div>

        <div class="alarm-good">
          <div class="alarm-header">‚úÖ Dise√±o Robusto (OCP + Interfaz)</div>
          <div class="alarm-body">
            <span class="comment">// 1. Definimos el contrato</span><br />
            <span class="kw">interface</span> MetodoPago {<br />
            &nbsp;&nbsp;obtenerIcono(): <span class="kw">string</span>;<br />
            &nbsp;&nbsp;formatearReporte(): <span class="kw">any</span>;<br />
            }<br /><br />

            <span class="comment"
              >// 2. Los m√≥dulos se vuelven ciegos (CERRADOS)</span
            ><br />
            <span class="comment"
              >// GeneradorReportes.ts (NUNCA M√ÅS SE TOCA)</span
            ><br />
            reporte.escribir( metodo.<span class="ok">formatearReporte()</span>
            );<br /><br />

            <span class="comment">// CheckoutView.ts (NUNCA M√ÅS SE TOCA)</span
            ><br />
            ui.dibujar( metodo.<span class="ok">obtenerIcono()</span>
            );<br /><br />

            <span class="ok"
              >‚ú® PayPal solo requiere crear 1 archivo nuevo<br />
              y registrarlo en la Factory.</span
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Coexistencia CON OTROS PRINCIPIOS -->
    <div class="tensions-section">
      <div class="section-title">Coexistencia con otros principios</div>

      <div
        style="
          font-size: 12px;
          color: var(--text-dim);
          max-width: 860px;
          margin: 0 auto 24px;
          line-height: 1.8;
        "
      >
        OCP no vive solo. Coexiste con otros principios que a veces empujan en
        direcci√≥n contraria. Entender esas tensiones es lo que separa a alguien
        que <em>aplica reglas</em> de alguien que
        <em>toma decisiones de dise√±o.</em>
      </div>

      <div class="tensions-grid" style="grid-template-columns: 1fr; gap: 16px">
        <!-- YAGNI -->
        <div class="tension-card t-yagni">
          <div class="tension-header">
            ‚ö° YAGNI ‚Äî You Aren't Gonna Need It
            <span class="tension-badge">tensi√≥n alta</span>
          </div>
          <div class="tension-body">
            <strong>El conflicto:</strong> OCP dice
            <em
              >"dise√±a pensando en que el sistema va a crecer, crea
              abstracciones para extender f√°cil."</em
            >
            YAGNI dice
            <em
              >"no construyas infraestructura para un futuro que quiz√°s nunca
              llega."</em
            ><br /><br />

            <strong>El problema concreto:</strong> Imagina que hoy tienes un
            solo m√©todo de pago: Tarjeta. OCP te tentar√≠a a crear la interfaz
            <code style="color: var(--tension)">MetodoPago</code>, la Factory,
            la jerarqu√≠a completa... para un sistema que hoy tiene un √∫nico
            caso. YAGNI dice que eso es tiempo y complejidad tirados a la basura
            si PayPal nunca llega.<br /><br />

            <strong>¬øPor qu√© importa?</strong> El c√≥digo que escribes hoy tiene
            un costo real: alguien lo tiene que leer, entender y mantener. Una
            abstracci√≥n innecesaria no es "c√≥digo limpio", es ruido que todos
            tienen que navegar.<br /><br />

            <div
              style="
                background: rgba(240, 154, 75, 0.08);
                border: 1px solid rgba(240, 154, 75, 0.2);
                border-radius: 6px;
                padding: 14px;
              "
            >
              <strong style="color: var(--tension)">El equilibrio:</strong
              ><br /><br />
              <span style="color: var(--text-dim)">
                üî¥ <strong style="color: var(--text)">1 caso</strong> ‚Üí hazlo
                simple, sin abstracciones. No especules.<br />
                üü° <strong style="color: var(--text)">2 casos</strong> ‚Üí
                considera si hay un patr√≥n real emergiendo.<br />
                üü¢
                <strong style="color: var(--text)">3+ casos concretos</strong> ‚Üí
                OCP empieza a justificar su costo. Abstra√©.<br /><br />
                La pregunta no es "¬ødebo usar OCP?" sino:
                <em style="color: var(--tension)"
                  >"¬øcu√°nto cuesta agregar esto despu√©s vs ahora?"</em
                >
                Si el costo futuro es bajo, YAGNI gana. Si es alto, OCP gana.
              </span>
            </div>
          </div>
        </div>

        <!-- SRP -->
        <div class="tension-card t-srp">
          <div class="tension-header">
            üì¶ Sinergia SRP + OCP
            <span class="tension-badge" style="background:var(--open-dim); color:var(--open)">perfecta uni√≥n</span>
          </div>
          <div class="tension-body">
            <strong>No chocan, se potencian:</strong> SRP nos dice qu√© separar y OCP nos dice c√≥mo conectarlo sin acoplamiento.
            <br><br>
            <strong>El verdadero l√≠mite:</strong> La fricci√≥n aparece solo si malinterpretamos "responsabilidad". Si separas PayPal en 10 clases (icono, validador, procesador, etc.) solo por "cumplir", generas <strong>fragmentaci√≥n</strong>.
            <br><br>
            <div style="background:rgba(91,201,138,0.06); border:1px solid rgba(91,201,138,0.2); border-radius:6px; padding:14px;">
              <strong style="color:var(--open)">La regla de oro:</strong><br>
              "Las cosas que cambian por la misma raz√≥n, deben permanecer juntas". 
              Si el icono de PayPal y su l√≥gica de pago siempre cambian cuando PayPal actualiza su API, <strong>SRP dice que deben estar en la misma clase</strong>. El OCP luego usar√° esa clase completa como una pieza de Lego.
            </div>
          </div>
        </div>

        <!-- KISS -->
        <div class="tension-card t-kiss">
          <div class="tension-header">
            üí° KISS ‚Äî Keep It Simple, Stupid
            <span class="tension-badge">tensi√≥n media</span>
          </div>
          <div class="tension-body">
            <strong>El conflicto:</strong> KISS dice que la soluci√≥n m√°s simple
            que funciona es siempre la mejor. OCP introduce capas de
            indirecci√≥n: interfaces, factories, clases abstractas. Para alguien
            que lee el c√≥digo por primera vez, ese nivel de abstracci√≥n puede
            hacer muy dif√≠cil entender qu√© est√° pasando, porque el flujo nunca
            es directo ‚Äî siempre pasa por una capa intermedia.<br /><br />

            <strong>El problema concreto:</strong> Miras el
            <code style="color: var(--ocp)">ProcesadorPago</code> y ves
            <code style="color: var(--ocp)">metodo.procesar(monto)</code>. ¬øQu√©
            hace eso exactamente? No puedes saberlo leyendo esa l√≠nea sola.
            Tienes que rastrear qu√© objeto es
            <code style="color: var(--ocp)">metodo</code>, de d√≥nde vino, qu√©
            clase concreta se cre√≥ en la Factory. Eso es indirecci√≥n, y tiene un
            costo cognitivo real para todo el que lee ese c√≥digo.<br /><br />

            <strong>¬øPor qu√© importa?</strong> El c√≥digo lo escribes una vez
            pero lo lees decenas de veces. Una abstracci√≥n que ahorra trabajo al
            extender puede costar m√°s trabajo al entender y depurar. No es
            gratis.<br /><br />

            <div
              style="
                background: rgba(232, 197, 71, 0.07);
                border: 1px solid rgba(232, 197, 71, 0.2);
                border-radius: 6px;
                padding: 14px;
              "
            >
              <strong style="color: var(--ocp)">El equilibrio:</strong
              ><br /><br />
              <span style="color: var(--text-dim)">
                üîÑ Sistema que
                <strong style="color: var(--text)"
                  >cambia frecuentemente y crece</strong
                >
                ‚Üí la indirecci√≥n de OCP se justifica. El costo de leerla es
                menor al costo de modificar 8 archivos cada vez que llega un
                requerimiento nuevo.<br /><br />
                üìå Sistema
                <strong style="color: var(--text)">estable y peque√±o</strong> ‚Üí
                un <code style="color: var(--ocp)">if/else</code> directo es m√°s
                honesto, m√°s legible y m√°s f√°cil de depurar. No hay nada de malo
                en eso.<br /><br />
                <em style="color: var(--ocp)"
                  >La abstracci√≥n correcta simplifica. La abstracci√≥n prematura
                  complica. La diferencia est√° en el momento en que la
                  aplicas.</em
                >
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- S√çNTESIS -->
      <div
        style="
          max-width: 860px;
          margin: 20px auto 0;
          background: var(--surface);
          border: 1px solid var(--border);
          border-radius: 10px;
          padding: 22px 26px;
        "
      >
        <div
          style="
            font-size: 10px;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 12px;
          "
        >
          La s√≠ntesis
        </div>
        <div
          style="font-size: 12.5px; line-height: 1.9; color: var(--text-mid)"
        >
          YAGNI y KISS no son enemigos de OCP. Son
          <strong style="color: var(--text)">frenos necesarios</strong> que
          evitan que OCP se aplique como dogma. Un buen dise√±ador no pregunta
          <em>"¬øestoy cumpliendo OCP?"</em> sino
          <em style="color: var(--ocp)"
            >"¬øla abstracci√≥n que voy a crear va a justificar su costo a lo
            largo del tiempo?"</em
          ><br /><br />
          Si la respuesta es s√≠ ‚Üí OCP.<br />
          Si no ‚Üí KISS o YAGNI ganan esa discusi√≥n, y est√° bien que as√≠ sea.
        </div>
      </div>
    </div>

    <!-- BALANCE FINAL -->
    <div class="balance-section">
      <div class="section-title">La pregunta que resuelve el equilibrio</div>
      <div class="balance-bar">
        <div class="balance-side balance-left">
          Sobreingenier√≠a<br /><small
            >Abstracciones especulativas<br />que nadie necesita</small
          >
        </div>
        <div class="balance-center">‚öñÔ∏è</div>
        <div class="balance-side balance-right">
          Dise√±o fr√°gil<br /><small
            >Switch en 10 lugares<br />que rompe con cada cambio</small
          >
        </div>
      </div>
      <div class="balance-question">
        "Si ma√±ana llega un nuevo caso, ¬øcu√°ntos archivos tengo que modificar?"
      </div>
      <div class="balance-answers">
        <div class="balance-answer">
          <div class="dot" style="background: var(--open)"></div>
          1 archivo ‚Üí OCP est√° cumplido
        </div>
        <div class="balance-answer">
          <div class="dot" style="background: var(--tension)"></div>
          2 archivos ‚Üí ¬øEs necesario? Revisa si hay un patr√≥n real o est√°s
          especulando.
        </div>
        <div class="balance-answer">
          <div class="dot" style="background: var(--closed)"></div>
          M√°s de 3 ‚Üí dise√±o fr√°gil
        </div>
      </div>
    </div>
  </body>
</html>